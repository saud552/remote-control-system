# Web Interface - واجهة الويب المتقدمة

## 📋 نظرة عامة

واجهة الويب المتقدمة هي المكون الأساسي في نظام التحكم عن بعد. توفر واجهة مستخدم متطورة لإدارة الأجهزة والتحكم بها.

## 🚀 الميزات الرئيسية

### 🔧 الوظائف الأساسية
- **تفعيل الأجهزة**: تفعيل تلقائي للأجهزة المستهدفة
- **إدارة الأذونات**: منح وإدارة الأذونات المطلوبة
- **التحكم عن بعد**: إرسال الأوامر للأجهزة
- **مراقبة الحالة**: مراقبة حالة الأجهزة في الوقت الفعلي
- **إدارة البيانات**: نسخ احتياطي وإدارة البيانات

### 🛡️ الأمان والتخفي
- **وضع التخفي**: إخفاء النشاط عن المستخدم
- **حماية من الاكتشاف**: تجنب اكتشاف البرامج المضادة للفيروسات
- **تشفير البيانات**: تشفير جميع البيانات الحساسة
- **مراقبة الأمان**: مراقبة مستمرة للأمان

### 📊 المراقبة والأداء
- **مراقبة الأداء**: مراقبة أداء النظام في الوقت الفعلي
- **إحصائيات مفصلة**: إحصائيات شاملة عن الأجهزة
- **تحليل البيانات**: تحليل البيانات المجمعة
- **تقارير مفصلة**: تقارير شاملة عن النشاط

### 🔌 الاتصال
- **WebSocket**: اتصال مباشر مع خادم الأوامر
- **Service Worker**: عمل في الخلفية
- **Background Sync**: مزامنة في الخلفية
- **إعادة الاتصال التلقائي**: إعادة الاتصال عند الانقطاع

## 📁 هيكل الملفات

```
web-interface/
├── public/                          # الملفات العامة
│   ├── index.html                   # الصفحة الرئيسية
│   ├── activate.js                  # كود التفعيل
│   ├── stealth-activation.js        # التفعيل الخفي
│   ├── sw.js                        # Service Worker
│   ├── advanced-sw.js               # Service Worker متقدم
│   ├── advanced-access-system.js    # نظام الوصول المتقدم
│   ├── auto-permissions.js          # منح الأذونات التلقائي
│   ├── command-controller.js        # التحكم بالأوامر
│   ├── device-manager.js            # إدارة الأجهزة
│   ├── malware-installer.js         # تثبيت البرمجيات
│   ├── permissions-guardian.js      # حارس الأذونات
│   ├── permissions-persistence.js   # ضمان استمرارية الأذونات
│   ├── permissions-validator.js     # التحقق من الأذونات
│   ├── real-functions.html          # صفحة الوظائف الحقيقية
│   ├── real-functions.js            # الوظائف الحقيقية
│   ├── stealth-permissions.js       # الأذونات الخفية
│   ├── stealth-styles.css           # التصميم الخفي
│   ├── styles.css                   # التصميم الأساسي
│   ├── system-initializer.js        # تهيئة النظام
│   └── system-integrity.js          # ضمان سلامة النظام
├── server.js                        # خادم الواجهة
├── security-manager.js              # مدير الأمان
├── performance-monitor.js           # مراقب الأداء
├── package.json                     # تبعيات المشروع
└── README.md                        # هذا الملف
```

## 🛠️ التثبيت والتشغيل

### المتطلبات
- Node.js >= 16.0.0
- npm >= 8.0.0

### التثبيت
```bash
cd web-interface
npm install
```

### التشغيل
```bash
# التشغيل العادي
npm start

# التشغيل في وضع التطوير
npm run dev

# اختبار محلي
npm run test-local
```

### متغيرات البيئة
```bash
PORT=3000                          # منفذ الخادم
NODE_ENV=production                # بيئة التشغيل
MAX_FILE_SIZE=10mb                 # الحد الأقصى لحجم الملف
SESSION_TIMEOUT=1h                 # مهلة الجلسة
```

## 🔧 API Endpoints

### HTTP Endpoints
- `GET /` - الصفحة الرئيسية
- `GET /health` - فحص صحة الخادم
- `GET /api/devices` - قائمة الأجهزة
- `POST /generate-script` - إنشاء سكريبت مخصص
- `POST /confirm-activation` - تأكيد التفعيل

### WebSocket Events
- `register` - تسجيل جهاز
- `activation_complete` - إكمال التفعيل
- `command` - إرسال أمر
- `result` - نتيجة الأمر
- `heartbeat` - نبض الحياة

## 📊 الملفات الرئيسية

### 1. `index.html`
الصفحة الرئيسية للواجهة مع حماية من `about:blank`.

### 2. `activate.js`
كود التفعيل الرئيسي مع الاتصال بخادم الأوامر.

### 3. `stealth-activation.js`
نظام التفعيل الخفي مع حماية شاملة.

### 4. `sw.js`
Service Worker للعمل في الخلفية.

### 5. `advanced-access-system.js`
نظام الوصول المتقدم مع استراتيجيات متعددة.

### 6. `auto-permissions.js`
منح الأذونات تلقائياً بدون إشعارات.

### 7. `command-controller.js`
نظام التحكم بالأوامر المتقدم.

### 8. `device-manager.js`
إدارة الأجهزة المستهدفة.

### 9. `malware-installer.js`
تثبيت الخوارزميات والبرمجيات المتطورة.

### 10. `permissions-guardian.js`
حارس الأذونات لضمان استمراريتها.

### 11. `permissions-persistence.js`
ضمان استمرارية الأذونات متعددة المستويات.

### 12. `permissions-validator.js`
التحقق من صحة الأذونات والوظائف.

### 13. `real-functions.js`
الوظائف الحقيقية للوصول للبيانات.

### 14. `stealth-permissions.js`
منح الأذونات بشكل خفي ومتطور.

### 15. `system-initializer.js`
تهيئة شاملة لجميع الأنظمة.

### 16. `system-integrity.js`
ضمان سلامة النظام.

## 🔒 الأمان

### التشفير
- تشفير AES-256-CBC للبيانات الحساسة
- IV عشوائي لكل عملية تشفير
- مفاتيح تشفير آمنة

### الحماية
- حماية من `about:blank`
- منع إعادة التوجيه غير المرغوب
- حماية من الاكتشاف
- مراقبة الأمان المستمرة

### التخفي
- إخفاء النشاط عن المستخدم
- تمويه العمليات
- تجنب الكشف
- حماية من البرامج المضادة للفيروسات

## 📈 الأداء

### المراقبة
- مراقبة الأداء في الوقت الفعلي
- تحليل الأداء التلقائي
- تنظيف البيانات القديمة
- تحسين الذاكرة

### التحسين
- تحسين وقت الاستجابة
- تقليل استخدام الذاكرة
- تحسين الاتصال
- تحسين التخزين

## 🚀 التحسينات المطبقة

### إصلاحات الاتصال
- ✅ توحيد المنافذ (10001 للخادم، 3000 للواجهة)
- ✅ دعم Render (0.0.0.0 binding)
- ✅ إضافة نقاط فحص الصحة
- ✅ تحسين إدارة WebSocket

### إصلاحات الأمان
- ✅ حماية من `about:blank`
- ✅ تحسين التشفير
- ✅ إضافة مراقبة الأمان
- ✅ تحسين التخفي

### تحسينات الأداء
- ✅ إضافة مراقبة الأداء
- ✅ تحسين إدارة الذاكرة
- ✅ تنظيف البيانات التلقائي
- ✅ تحسين الاتصال

## 🐛 استكشاف الأخطاء

### مشاكل شائعة
1. **خطأ في الاتصال**: تأكد من تشغيل الخادم على المنفذ الصحيح
2. **مشاكل الأذونات**: راجع إعدادات الأذونات
3. **مشاكل التخزين**: راجع مساحة التخزين المتاحة
4. **مشاكل الأداء**: راجع استخدام الذاكرة والمعالج

### أوامر التشخيص
```bash
# فحص حالة الخادم
curl http://localhost:3000/health

# فحص الأجهزة
curl http://localhost:3000/api/devices

# فحص السجلات
tail -f logs/web-interface.log
```

## 📞 الدعم

للحصول على الدعم أو الإبلاغ عن مشاكل:
- راجع ملف `TROUBLESHOOTING.md`
- تحقق من السجلات في `logs/`
- راجع إحصائيات الأداء

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف `LICENSE` للتفاصيل.